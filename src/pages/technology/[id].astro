---
import Layout from '@layouts/Layout.astro';
import Page from '@layouts/Page.astro';
import { sort } from '@utils/lookup.js';
import type { Item } from '@utils/lookup.js';
import { buildItemMeta } from '@utils/seo.js';
import * as dataSources from '@datav2/index';

export async function getStaticPaths() {
  // Combine all technology types into a single array
  const allTech: Item[] = [
    ...dataSources.ConstructedTechnology,
    ...dataSources.Technology,
    ...dataSources.TechnologyModule
  ] as Item[];

  const sortedTech = sort(allTech);
  return sortedTech.map((post) => ({
    params: { id: post.Id.toString() },
    props: { item: post },
  }));
}

interface Props {
  item: Item;
}

const { item } = Astro.props;

if (!item) {
  return Astro.redirect('/404');
}
const { title, description } = buildItemMeta(item, 'Technology Item');
---

<Layout
  {title}
  {description}
  slug="technology"
>
  <Page item={item} />
</Layout>